// P2P Host Node Configuration

// Node identity and basic settings
node: {
    // Node identification
    id: ""  // Will be assigned by coordinator
    name: "P2P-Host"
    type: "p2p"  // "p2p" or "vps"
    
    // Geographic location
    geo_location: {
        enabled: true
        report_location: true
        location_update_interval: 3600  // seconds
        region: ""  // auto-detected
        datacenter: ""  // if applicable
    }
    
    // Network settings
    network: {
        bind_ip: "0.0.0.0"
        port: 0  // Will be assigned by coordinator
        public_ip: ""  // Leave empty for auto-detection
        coordinator_address: "coordinator.example.com"
        coordinator_port: 5121
    }
    
    // Hardware verification
    hardware_verification: {
        enabled: true
        verify_cpu_features: true
        verify_memory_specs: true
        verify_storage_type: true
        detect_virtualization: true
        verification_interval: 3600  // seconds
    }
    
    // Performance settings
    performance: {
        max_maps: 5
        max_players_per_map: 100
        total_max_players: 300
        update_interval: 50  // ms
    }
}

// Resource management
resources: {
    // CPU settings
    cpu: {
        max_usage: 80  // percentage
        reserved_cores: 1
        required_features: []  // Will be populated by system detection
        process_priority: "normal"  // low, normal, high
        metrics: {
            collect_model_info: true
            collect_frequency: true
            collect_cache_info: true
            collect_load_avg: true
            benchmark_interval: 3600  // seconds
        }
    }
    
    // Memory settings
    memory: {
        max_usage: 85  // percentage
        min_free: 512  // MB
        min_available: 1024  // MB
        swap_threshold: 90  // percentage
        pressure_monitoring: true
        metrics: {
            collect_detailed_stats: true
            monitor_pressure: true
            track_page_faults: true
            track_cached_ram: true
        }
    }
    
    // Storage metrics
    storage: {
        min_free_space: 1024  // MB
        temp_directory: "/tmp/p2p-host"
        map_cache_size: 256  // MB
        monitor_io_stats: true
        monitor_disk_health: true
    }
    
    // Network settings
    network: {
        max_bandwidth: 100  // Mbps
        buffer_size: 65536
        max_connections: 1000
        quality_monitoring: {
            enabled: true
            measure_upload_speed: true
            measure_download_speed: true
            measure_latency: true
            measure_jitter: true
            measure_packet_loss: true
            test_interval: 300  // seconds
            test_duration: 10   // seconds
        }
    }
}

// Monitoring and metrics
monitoring: {
    // System metrics
    system_metrics: {
        enabled: true
        collection_interval: 5000  // ms
        report_interval: 30000     // ms
        collectors: {
            hardware_info: true
            cpu_features: true
            memory_details: true
            storage_health: true
            thermal_metrics: true
        }
        
        // History tracking
        history: {
            enabled: true
            storage_days: 30
            track_failures: true
            track_performance: true
            track_load: true
            track_network: true
        }
    }
    
    // Performance metrics
    performance_metrics: {
        enabled: true
        detailed_logging: false
        threshold_alerts: true
        metrics: {
            cpu_per_core: true
            memory_pressure: true
            io_pressure: true
            thread_usage: true
        }
        
        // Automated testing
        automated_tests: {
            enabled: true
            schedule_interval: 86400  // daily
            stress_test_duration: 600  // seconds
            network_test_size: 100    // MB
            concurrent_connections: 100
            map_load_count: 10
        }
    }
    
    // Network metrics
    network_metrics: {
        enabled: true
        bandwidth_monitoring: true
        latency_monitoring: true
        connection_tracking: true
        advanced: {
            packet_loss_tracking: true
            jitter_monitoring: true
            tcp_retransmits: true
            connection_quality: true
            network_stability: true
            route_monitoring: true
        }
    }
    
    // Security verification
    security: {
        system_checks: {
            verify_encryption: true
            check_firewall: true
            check_ddos_protection: true
            verify_secure_boot: true
            check_os_updates: true
            verify_antivirus: true
        }
        scan_interval: 3600  // seconds
        alert_on_failure: true
    }
}

// Health checks
health_check: {
    enabled: true
    interval: 5000      // ms
    timeout: 1000       // ms
    checks: {
        cpu_pressure: true
        memory_pressure: true
        io_pressure: true
        network_quality: true
    }
    failure_threshold: 3
}

// Stability tracking
stability: {
    track_session_success: true
    track_failure_reasons: true
    track_recovery_times: true
    calculate_stability_score: true
    generate_reliability_report: true
    min_tracking_period: 604800  // 7 days in seconds
    score_threshold: 0.95
    reporting: {
        interval: 3600  // seconds
        detailed_stats: true
        include_historical: true
    }
}