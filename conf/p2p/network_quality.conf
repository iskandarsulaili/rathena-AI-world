# Network Quality Configuration
# This file contains all configurable parameters for P2P network quality management

#------------------------------------------------------------------------------
# Core Network Thresholds
#------------------------------------------------------------------------------

[thresholds]
# Latency thresholds in milliseconds
latency_warning = 100      # Warning threshold
latency_critical = 200     # Critical threshold
latency_max = 300         # Maximum acceptable latency

# Bandwidth requirements in Mbps
bandwidth_min = 5         # Minimum required bandwidth
bandwidth_optimal = 10    # Optimal bandwidth
bandwidth_warning = 3     # Warning threshold

# Packet loss thresholds (percentage)
packet_loss_warning = 1.0   # Warning level (1%)
packet_loss_critical = 2.0  # Critical level (2%)
packet_loss_max = 5.0      # Maximum acceptable loss

# Jitter thresholds in milliseconds
jitter_warning = 20       # Warning threshold
jitter_critical = 50      # Critical threshold

#------------------------------------------------------------------------------
# Scoring Weights
#------------------------------------------------------------------------------

[scoring]
# Weight factors for quality score calculation (must sum to 1.0)
latency_weight = 0.4      # Latency importance
bandwidth_weight = 0.3    # Bandwidth importance
stability_weight = 0.3    # Stability importance (packet loss + jitter)

# Score adjustments
vps_bonus = 1.2          # Multiplier for VPS hosts
dedicated_bonus = 1.1     # Multiplier for dedicated connections

#------------------------------------------------------------------------------
# Testing Configuration
#------------------------------------------------------------------------------

[testing]
# Test frequency in seconds
ping_interval = 30        # Basic connectivity check
full_test_interval = 300  # Complete quality test
bandwidth_test_interval = 3600  # Bandwidth test

# Test parameters
ping_samples = 10        # Number of ping samples per test
bandwidth_duration = 10  # Duration of bandwidth test in seconds
jitter_samples = 100     # Number of samples for jitter calculation

#------------------------------------------------------------------------------
# Auto-scaling Configuration
#------------------------------------------------------------------------------

[scaling]
# Load-based adjustments
max_latency_increase = 1.5  # Maximum allowed latency increase under load
min_bandwidth_scale = 0.7   # Minimum bandwidth scale factor under load

# Recovery thresholds
recovery_attempt_interval = 300  # Seconds between recovery attempts
max_recovery_attempts = 3       # Maximum recovery attempts before failover

#------------------------------------------------------------------------------
# Monitoring Configuration
#------------------------------------------------------------------------------

[monitoring]
# Storage settings
metrics_retention_days = 30  # How long to keep detailed metrics
aggregation_interval = 300   # Interval for metrics aggregation (seconds)

# Alert thresholds
alert_cool_down = 300       # Minimum seconds between similar alerts
max_alerts_per_hour = 10    # Maximum alerts per host per hour

#------------------------------------------------------------------------------
# Geographic Configuration
#------------------------------------------------------------------------------

[geographic]
# Network quality zones (in order of preference)
quality_zones = [
    "premium",    # <50ms, >20Mbps
    "standard",   # <100ms, >10Mbps
    "basic",      # <200ms, >5Mbps
    "restricted"  # All others
]

# Zone requirements
zone_requirements = {
    "premium": {
        "max_latency": 50,
        "min_bandwidth": 20,
        "max_packet_loss": 0.1
    },
    "standard": {
        "max_latency": 100,
        "min_bandwidth": 10,
        "max_packet_loss": 0.5
    },
    "basic": {
        "max_latency": 200,
        "min_bandwidth": 5,
        "max_packet_loss": 1.0
    }
}

#------------------------------------------------------------------------------
# Recovery and Failover
#------------------------------------------------------------------------------

[recovery]
# Automatic recovery settings
enable_auto_recovery = true
recovery_wait_time = 60     # Seconds to wait before recovery attempt
max_recovery_time = 300     # Maximum seconds to attempt recovery

# Failover settings
failover_threshold = 3      # Failed recovery attempts before failover
min_backup_hosts = 2        # Minimum available backup hosts
backup_quality_threshold = 80  # Minimum quality score for backup hosts

#------------------------------------------------------------------------------
# Advanced Settings
#------------------------------------------------------------------------------

[advanced]
# Network buffer sizes
tcp_buffer_size = 65536    # TCP buffer size in bytes
udp_buffer_size = 8192     # UDP buffer size in bytes

# Connection pooling
min_connections = 5        # Minimum connections in pool
max_connections = 50       # Maximum connections in pool
connection_timeout = 5000  # Connection timeout in milliseconds

# State sync settings
sync_interval = 60         # State sync interval in seconds
sync_batch_size = 1000    # Maximum state updates per batch
sync_timeout = 30         # Sync operation timeout in seconds

#------------------------------------------------------------------------------
# Debug Settings
#------------------------------------------------------------------------------

[debug]
# Debug logging levels (0=off, 1=basic, 2=detailed, 3=verbose)
network_debug_level = 1     # Network operations logging
quality_debug_level = 1     # Quality measurements logging
scaling_debug_level = 1     # Auto-scaling operations logging

# Debug features
enable_detailed_metrics = true  # Enable detailed metric collection
log_all_quality_checks = false  # Log all quality check results
simulate_network_issues = false # Enable network issue simulation